(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{108:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},113:function(e,t,a){e.exports=a(218)},122:function(e,t,a){},124:function(e,t,a){},132:function(e,t){},134:function(e,t){},168:function(e,t){},169:function(e,t){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(47),s=a.n(o),c=a(13),i=a(33),l=a(26),u=a(31),m=a(7),p=a(8),d=a(10),v=a(9),b=a(12),h=a(11),f=a(32),E=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.dataTestId,n=e.value,o=e.type,s=e.onChange;return r.a.createElement("input",{className:"form-control",type:o,required:"required",name:t,placeholder:t,"data-testid":a,value:n,onChange:s})}}]),t}(r.a.Component),g=[{name:"Nome",type:"text",dataTestId:"input-player-name"},{name:"Email",type:"email",dataTestId:"input-gravatar-email"}],y=function(){return fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))};function O(){return function(e){return e({type:"REQUESTING_TOKEN"}),y().then((function(t){return e((a=t.token,localStorage.setItem("token",a),{type:"FOUND_TOKEN",token:a}));var a}),(function(t){return e(function(e){return{type:"TOKEN_NOT_FOUND",error:e}}(t.message))}))}}a(122);var k=a(108),N=a.n(k),j=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(v.a)(t).call(this))).state={Nome:"",Email:"",Disabled:!0},e.stateUpdater=e.stateUpdater.bind(Object(b.a)(e)),e.disableCheck=e.disableCheck.bind(Object(b.a)(e)),e.setLocalStorage=e.setLocalStorage.bind(Object(b.a)(e)),e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchToken)()}},{key:"settingsButton",value:function(){return r.a.createElement("div",{className:"float-right"},r.a.createElement(c.b,{to:"settings"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:"btn-set"},r.a.createElement(f.a,{size:"25"}))))}},{key:"setLocalStorage",value:function(){var e=this.state,t={player:{name:e.Nome,gravatarEmail:e.Email,assertions:0,score:0}};localStorage.setItem("state",JSON.stringify(t))}},{key:"disableCheck",value:function(){var e=this.state,t=e.Nome,a=e.Email;""!==t&&""!==a?this.setState((function(){return{Disabled:!1}})):this.setState((function(){return{Disabled:!0}}))}},{key:"stateUpdater",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState((function(){return Object(u.a)({},n,r)}),(function(){return t.disableCheck()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.Disabled,n=t.Nome,o=t.Email;return r.a.createElement("div",{className:"full-container"},r.a.createElement("div",{className:"login-form"},r.a.createElement("img",{src:N.a,alt:"trivia",className:"text-center trivia-logo"}),r.a.createElement("form",null,g.map((function(t){var a=t.name,s=t.type,c=t.dataTestId;return r.a.createElement(E,{key:a,name:a,value:"Nome"===a?n:o,type:s,dataTestId:c,onChange:e.stateUpdater})}))),r.a.createElement(c.b,{className:"link-play",to:"/gamepage"},r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:a,onClick:this.setLocalStorage,id:"play-button",className:"btn btn-info btn-block"},"Jogar!!")),this.settingsButton()))}}]),t}(r.a.Component),S=Object(i.b)(null,(function(e){return{fetchToken:function(){return e(O())}}}))(j),w=(a(124),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(v.a)(t).call(this))).state={amount:"5",category:"",difficult:"",type:"",redirect:!1},e.stateUpdater=e.stateUpdater.bind(Object(b.a)(e)),e.saveChanges=e.saveChanges.bind(Object(b.a)(e)),e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"saveChanges",value:function(){localStorage.settings=JSON.stringify(this.state),this.setState({redirect:!0})}},{key:"stateUpdater",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.amount,n=e.category,o=e.difficult,s=e.type;return t?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"settings-container"},r.a.createElement("h1",{"data-testid":"settings-title",className:"h1"},"Settings"),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{type:"button",className:"btn btn-info home"},r.a.createElement(f.b,null))),r.a.createElement("form",{className:"form-api"},r.a.createElement("div",{className:"flex-labels"},r.a.createElement("label",{htmlFor:"amount"},"Number of Questions:",r.a.createElement("input",{type:"number",name:"amount",id:"trivia_amount",className:"form-control",onChange:this.stateUpdater,min:"1",max:"50",value:a})),r.a.createElement("label",{htmlFor:"category"},"Select Category:",r.a.createElement("select",{onChange:this.stateUpdater,name:"category",value:n,className:"form-control"},r.a.createElement("option",{value:""},"Any Category"),r.a.createElement("option",{value:"9"},"General Knowledge"),r.a.createElement("option",{value:"10"},"Entertainment: Books"),r.a.createElement("option",{value:"11"},"Entertainment: Film"),r.a.createElement("option",{value:"12"},"Entertainment: Music"),r.a.createElement("option",{value:"13"},"Entertainment: Musicals & Theatres"),r.a.createElement("option",{value:"14"},"Entertainment: Television"),r.a.createElement("option",{value:"15"},"Entertainment: Video Games"),r.a.createElement("option",{value:"16"},"Entertainment: Board Games"),r.a.createElement("option",{value:"17"},"Science & Nature"),r.a.createElement("option",{value:"18"},"Science: Computers"),r.a.createElement("option",{value:"19"},"Science: Mathematics"),r.a.createElement("option",{value:"20"},"Mythology"),r.a.createElement("option",{value:"21"},"Sports"),r.a.createElement("option",{value:"22"},"Geography"),r.a.createElement("option",{value:"23"},"History"),r.a.createElement("option",{value:"24"},"Politics"),r.a.createElement("option",{value:"25"},"Art"),r.a.createElement("option",{value:"26"},"Celebrities"),r.a.createElement("option",{value:"27"},"Animals"),r.a.createElement("option",{value:"28"},"Vehicles"),r.a.createElement("option",{value:"29"},"Entertainment: Comics"),r.a.createElement("option",{value:"30"},"Science: Gadgets"),r.a.createElement("option",{value:"31"},"Entertainment: Japanese Anime & Manga"),r.a.createElement("option",{value:"32"},"Entertainment: Cartoon & Animations"))),r.a.createElement("label",{htmlFor:"difficult"},"Select Difficulty:",r.a.createElement("select",{onChange:this.stateUpdater,name:"difficult",value:o,className:"form-control"},r.a.createElement("option",{value:""},"Any Difficulty"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"type"},"Select Type:",r.a.createElement("select",{onChange:this.stateUpdater,value:s,name:"type",className:"form-control"},r.a.createElement("option",{value:""},"Any Type"),r.a.createElement("option",{value:"multiple"},"Multiple Choice"),r.a.createElement("option",{value:"boolean"},"True / False"))),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"button",onClick:this.saveChanges},"Confirm Settings"))))}}]),t}(r.a.Component)),C=a(15),T=a(41),A=a.n(T),x=function(e,t){return function(a){var n,r,o,s,c,i;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n={},""===t){l.next=8;break}return r=t.amount,o=t.category,s=t.difficult,c=t.type,l.next=5,A.a.awrap(fetch("https://opentdb.com/api.php?amount=".concat(r,"&category=").concat(o,"&difficulty=").concat(s,"&type=").concat(c,"&token=").concat(e)));case 5:n=l.sent,l.next=11;break;case 8:return l.next=10,A.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 10:n=l.sent;case 11:return l.next=13,A.a.awrap(n.json());case 13:i=l.sent,a({type:"TOKEN_SUCCESS",questions:i});case 15:case"end":return l.stop()}}))}},q=a(112),F=a(49),M=a.n(F),U=a(110),I=(a(211),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(v.a)(t).call(this))).state={disable:!1,tempo:30,currentQuestion:0,assertions:0},e.timerFunction=e.timerFunction.bind(Object(b.a)(e)),e.stopCounter=e.stopCounter.bind(Object(b.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(b.a)(e)),e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.timerFunction()}},{key:"nextQuestion",value:function(){this.setState((function(e){return{currentQuestion:e.currentQuestion+1,disable:!1,tempo:30}})),this.timerFunction();var e=document.querySelectorAll("[value=WrongAnswer]");document.querySelectorAll("[value=CorrectAnswer]").forEach((function(e){e.style.border=""})),e.forEach((function(e){e.style.border=""}))}},{key:"scored",value:function(){var e,t=JSON.parse(localStorage.getItem("state")),a=this.state,n=a.tempo,r=a.currentQuestion,o=a.assertions;switch(this.props.question[r].difficulty){case"easy":e=1;break;case"medium":e=2;break;case"hard":e=3}var s=t.player.score;s=s+10+e*n,localStorage.setItem("state",JSON.stringify({player:Object(C.a)({},t.player,{score:s,assertions:o})}))}},{key:"choosed",value:function(e){var t=this;"CorrectAnswer"===e.target.value?this.setState((function(e){return{disable:!0,assertions:e.assertions+1}}),(function(){return t.scored()})):this.setState({disable:!0}),this.stopCounter();var a=document.querySelectorAll("[value=WrongAnswer]");document.querySelectorAll("[value=CorrectAnswer]").forEach((function(e){e.style.border="3px solid rgb(6, 240, 15)"})),a.forEach((function(e){e.style.border="3px solid rgb(255, 0, 0)"}))}},{key:"stopCounter",value:function(){window.clearInterval(this.interval)}},{key:"timerFunction",value:function(){var e=this;this.interval=setInterval((function(){if(e.setState((function(e){return Object(C.a)({},e,{tempo:e.tempo-1})})),e.state.tempo<1){e.stopCounter(),e.setState({resposta:"WrongAnswer",disable:!0});var t=document.querySelectorAll("[value=WrongAnswer]");document.querySelectorAll("[value=CorrectAnswer]").forEach((function(e){e.style.border="3px solid rgb(6, 240, 15)"})),t.forEach((function(e){e.style.border="3px solid rgb(255, 0, 0)"}))}}),1e3)}},{key:"timer",value:function(){var e=this.state.tempo;return r.a.createElement("div",{className:"div-time"},r.a.createElement(U.a,{className:"stop-watch",size:"50"}),r.a.createElement("span",{className:"time"},e))}},{key:"decode",value:function(e){var t={"&amp;":"&","&#038;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&#8217;":"\u2019","&#8216;":"\u2018","&#8211;":"\u2013","&#8212;":"\u2014","&#8230;":"\u2026","&#8221;":"\u201d"};return e.replace(/&[\w\d#]{2,5};/g,(function(e){return t[e]}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentQuestion,n=t.disable,o=this.props.question,s=this.timer();if(a===o.length){var c=JSON.parse(localStorage.state),i=M()(c.player.gravatarEmail);return localStorage.ranking?localStorage.ranking=JSON.stringify([].concat(Object(q.a)(JSON.parse(localStorage.ranking)),[{name:c.player.name,score:c.player.score,picture:"https://www.gravatar.com/avatar/".concat(i)}])):localStorage.ranking=JSON.stringify([{name:c.player.name,score:c.player.score,picture:"https://www.gravatar.com/avatar/".concat(i)}]),r.a.createElement(l.a,{to:"/feedback"})}return r.a.createElement("div",null,r.a.createElement("div",{className:"div-questions"},s,r.a.createElement("h4",{"data-testid":"question-category"},o[a].category),r.a.createElement("p",{"data-testid":"question-text",className:"question"},this.decode(o[a].question))),o[a].respostas.map((function(t,a){return r.a.createElement("div",{key:a,className:"text-center"},r.a.createElement("button",{className:"col-md-6 option btn-sm",key:a,type:"button",value:t.value,"data-testid":t.dataTestid,disabled:n,onClick:function(t){return e.choosed(t)}},e.decode(t.resposta)))})),n&&r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn-next btn btn-primary","data-testid":"btn-next",onClick:this.nextQuestion,type:"button"},"Pr\xf3xima")))}}]),t}(r.a.Component)),J=(a(212),function(e){function t(e){var a;Object(m.a)(this,t),a=Object(d.a)(this,Object(v.a)(t).call(this,e));var n=JSON.parse(localStorage.getItem("state"));return a.state={avatar:"https://www.gravatar.com/avatar/".concat(M()(n.player.gravatarEmail)),score:n.player.score,name:n.player.name},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.avatar,a=e.score,n=e.name;return r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement("img",{src:t,alt:"avatar","data-testid":"header-profile-picture",className:"avatar"}),r.a.createElement("strong",{"data-testid":"header-player-name"}," Jogador: ".concat(n)),r.a.createElement("div",{className:"score"},r.a.createElement("strong",null,r.a.createElement("span",null,"Pontos: "),r.a.createElement("span",{"data-testid":"header-score"},a)))))}}]),t}(n.Component)),D=(a(213),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchQuestion,a=e.token,n="";localStorage.settings&&(n=JSON.parse(localStorage.settings)),t(a,n)}},{key:"shuffle",value:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}},{key:"render",value:function(){var e=this,t=this.props.questions,a=[];return t.length>0&&(a=t[0].results.map((function(t){var a=t.correct_answer,n=t.incorrect_answers;if("boolean"===t.type){if("True"===a){var r=[{resposta:a,dataTestid:"correct-answer",value:"CorrectAnswer"},{resposta:n[0],dataTestid:"wrong-answer-0",value:"WrongAnswer"}];return Object(C.a)({},t,{respostas:r})}var o=[{resposta:n[0],dataTestid:"wrong-answer-0",value:"WrongAnswer"},{resposta:a,dataTestid:"correct-answer",value:"CorrectAnswer"}];return Object(C.a)({},t,{respostas:o})}var s=[{resposta:a,dataTestid:"correct-answer",value:"CorrectAnswer"},{resposta:n[0],dataTestid:"wrong-answer-0",value:"WrongAnswer"},{resposta:n[1],dataTestid:"wrong-answer-1",value:"WrongAnswer"},{resposta:n[2],dataTestid:"wrong-answer-2",value:"WrongAnswer"}],c=e.shuffle(s);return Object(C.a)({},t,{respostas:c})}))),r.a.createElement("div",{className:"game-container"},r.a.createElement(J,null),t.length>0?r.a.createElement(I,{question:a}):"Loading...")}}]),t}(r.a.Component)),Q=Object(i.b)((function(e){return{token:e.tokenReducer.token,questions:e.questionsReducer.questions}}),(function(e){return{fetchQuestion:function(t,a){return e(x(t,a))}}}))(D),_=function(){return r.a.createElement("div",null,r.a.createElement("h1",null," Nenhum player encontrado. Volte depois."))},K=(a(214),function(e){var t=e.entry,a=e.index,n=t.name,o=t.picture,s=t.score;return r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("img",{src:o,alt:n}),r.a.createElement("h5",{"data-testid":"player-name-".concat(a)},n),r.a.createElement("h5",{"data-testid":"player-score-".concat(a)},s)))}),P=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(v.a)(t).call(this))).state={players:JSON.parse(localStorage.ranking||"[]")},e.sortingPlayers=e.sortingPlayers.bind(Object(b.a)(e)),e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.sortingPlayers()}},{key:"sortingPlayers",value:function(){var e=this.state.players;e.length>1&&this.setState({players:e.sort((function(e,t){return parseInt(t.score,10)-parseInt(e.score,10)}))})}},{key:"render",value:function(){var e=this.state.players;return r.a.createElement("div",{className:"full-container"},r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",className:"btn btn-info home",type:"button"},r.a.createElement(f.b,null))),r.a.createElement("h1",{"data-testid":"ranking-title"},"Melhores Jogadas"),r.a.createElement("ol",null,e?e.map((function(e,t){return r.a.createElement(K,{key:"".concat(t,"has"),index:t,entry:e})})):r.a.createElement(_,null)))}}]),t}(r.a.Component),G=(a(215),function(e){function t(){var e;Object(m.a)(this,t),e=Object(d.a)(this,Object(v.a)(t).call(this));var a=JSON.parse(localStorage.getItem("state"));return e.state={assertions:a.player.assertions,score:a.player.score},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"ggMessage",value:function(){return r.a.createElement("h1",{className:"h1"},"Mandou bem!")}},{key:"bgMessage",value:function(){return r.a.createElement("h1",{className:"h1"},"Podia ser melhor...")}},{key:"gameFeedback",value:function(e,t){return r.a.createElement("section",{className:"section"},r.a.createElement("p",null,r.a.createElement("span",null,"Voc\xea acertou "),r.a.createElement("span",{"data-testid":"feedback-total-question"},e),r.a.createElement("span",null," quest\xf5es!")),r.a.createElement("p",null,r.a.createElement("span",null,"Um total de "),r.a.createElement("span",{"data-testid":"feedback-total-score"},t),r.a.createElement("span",null," pontos ")))}},{key:"render",value:function(){var e=this.state,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"feedback-container"},r.a.createElement("main",{className:"section"},r.a.createElement(J,null),r.a.createElement("h2",{"data-testid":"feedback-text"},t>=3?this.ggMessage():this.bgMessage()),this.gameFeedback(t,a),r.a.createElement("div",null,r.a.createElement(c.b,{className:"link",to:"/ranking","data-testid":"btn-ranking"},"VER RANKING")),r.a.createElement("div",null,r.a.createElement(c.b,{className:"link",to:"/","data-testid":"btn-play-again"},"JOGAR NOVAMENTE"))))}}]),t}(n.Component));a(216),a(217);var R=a(25),W=a(111),V={isFetching1:!1,token:"",error1:""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTING_TOKEN":return Object(C.a)({},e,{isFetching1:!0});case"FOUND_TOKEN":return Object(C.a)({},e,{token:t.token,isFetching1:!1});case"TOKEN_NOT_FOUND":return Object(C.a)({},e,{error1:t.error,isFetching1:!1});default:return e}},L={questions:[]};var z=Object(R.c)({tokenReducer:B,questionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN_SUCCESS":return Object(C.a)({},e,{questions:[t.questions]});default:return e}}}),H=Object(R.e)(z,Object(R.d)(Object(R.a)(W.a)));s.a.render(r.a.createElement(c.a,null,r.a.createElement(i.a,{store:H},r.a.createElement((function(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/ranking",component:P}),r.a.createElement(l.b,{path:"/settings",component:w}),r.a.createElement(l.b,{path:"/gamepage",component:Q}),r.a.createElement(l.b,{path:"/feedback",component:G}),r.a.createElement(l.b,{exact:!0,path:"/",component:S}))}),null))),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.231a6aec.chunk.js.map